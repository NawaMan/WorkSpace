apiVersion: v1
kind: ConfigMap
metadata:
  name: postgres-config
data:
  POSTGRES_DB: tododb
  POSTGRES_USER: todouser
  POSTGRES_PASSWORD: todopass
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: postgres-init
data:
  init.sql: |
    CREATE TABLE IF NOT EXISTS tasks (
        id SERIAL PRIMARY KEY,
        title VARCHAR(255) NOT NULL,
        description TEXT,
        completed BOOLEAN DEFAULT FALSE,
        created_at TIMESTAMP DEFAULT NOW(),
        updated_at TIMESTAMP DEFAULT NOW()
    );

    INSERT INTO tasks (title, description, completed) VALUES
    ('Buy groceries', 'Milk, eggs, bread, and cheese', false),
    ('Review pull request', 'Check the new feature branch for issues', false),
    ('Schedule dentist appointment', 'Call Dr. Smith office', false),
    ('Finish reading book', 'Complete chapters 10-12 of Clean Code', true),
    ('Update resume', 'Add recent project experience', false)
    ON CONFLICT DO NOTHING;
