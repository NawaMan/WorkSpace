#!/usr/bin/env bash
# Usage: default_file_if_exists <current> <candidate_path> [file_not_used_token]
set -euo pipefail

current="${1:-}"; candidate="${2:-}"; not_used="${3:-}"

# If current is empty (or equals the special "not used" token), and candidate exists → pick candidate
if [[ -z "$current" || ( -n "$not_used" && "$current" == "$not_used" ) ]]; then
  if [[ -n "$candidate" && -f "$candidate" ]]; then
    echo "$candidate"; exit 0
  fi
fi

# Otherwise keep current (even if nonexistent — caller decides what to do)
echo "${current}"
